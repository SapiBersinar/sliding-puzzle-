<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sliding Puzzle Interaktif</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Mainkan game sliding puzzle interaktif dengan foto Anda sendiri atau gambar contoh. Potong gambar sesuai keinginan Anda dan tantang diri Anda dengan berbagai ukuran grid.">
    <meta name="keywords" content="sliding puzzle, puzzle geser, game puzzle, puzzle foto, game online, puzzle interaktif, potong gambar, gratis">
    <meta name="author" content="hanzercopy.cloud">
    
    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hanzercopy.cloud">
    <meta property="og:title" content="Sliding Puzzle Interaktif">
    <meta property="og:description" content="Mainkan game sliding puzzle interaktif dengan foto Anda sendiri atau gambar contoh. Potong gambar sesuai keinginan Anda dan tantang diri Anda dengan berbagai ukuran grid.">
    <meta property="og:image" content="https://placehold.co/1200x630/e0e7ff/4f46e5?text=Sliding%20Puzzle"> <!-- Ganti dengan URL gambar pratinjau Anda -->

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css"> <!-- Menghubungkan ke file CSS eksternal -->
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 light-theme">

    <div id="mainContent" class="w-full max-w-3xl p-6 rounded-xl main-container">
        <h1 class="text-3xl font-bold text-center text-primary mb-6" data-key="mainTitle">Sliding Puzzle Interaktif</h1>

        <div class="mb-6 text-center">
            <label for="themeSelect" class="block text-lg font-medium text-secondary mb-2" data-key="selectTheme">Pilih Tema:</label>
            <select id="themeSelect" class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600">
                <option value="light" data-key="lightTheme">Terang</option>
                <option value="dark" data-key="darkTheme">Gelap</option>
            </select>
        </div>

        <div class="mb-6 text-center">
            <label for="languageSelect" class="block text-lg font-medium text-secondary mb-2" data-key="selectLanguage">Pilih Bahasa:</label>
            <select id="languageSelect" class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600">
                <option value="en">English</option>
                <option value="id">Indonesia</option>
                <option value="zh">简体中文</option>
            </select>
        </div>

        <div class="mb-6">
            <label for="imageUpload" class="block text-lg font-medium text-secondary mb-2" data-key="uploadPhoto">Unggah Foto Anda:</label>
            <input type="file" id="imageUpload" accept="image/*" class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600">
        </div>

        <div class="mb-6 text-center">
            <label class="block text-lg font-medium text-secondary mb-2" data-key="orSelectSample">Atau Pilih Gambar Contoh:</label>
            <div id="sampleImageContainer" class="flex flex-wrap justify-center gap-2">
                <div class="sample-image-container" data-src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/1.png">
                    <img src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/1.png" alt="Contoh Gambar 1" onerror="this.onerror=null;this.src='https://placehold.co/80x80/cccccc/333333?text=Error';">
                </div>
                <div class="sample-image-container" data-src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/2.png">
                    <img src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/2.png" alt="Contoh Gambar 2" onerror="this.onerror=null;this.src='https://placehold.co/80x80/cccccc/333333?text=Error';">
                </div>
                <div class="sample-image-container" data-src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/3.png">
                    <img src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/3.png" alt="Contoh Gambar 3" onerror="this.onerror=null;this.src='https://placehold.co/80x80/cccccc/333333?text=Error';">
                </div>
                <div class="sample-image-container" data-src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/4.png">
                    <img src="https://raw.githubusercontent.com/SapiBersinar/data/main/gambar/4.png" alt="Contoh Gambar 4" onerror="this.onerror=null;this.src='https://placehold.co/80x80/cccccc/333333?text=Error';">
                </div>
            </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-6">
            <div class="text-center">
                <label for="gridSizeSelect" class="block text-lg font-medium text-secondary mb-2" data-key="selectPuzzleSize">Pilih Ukuran Puzzle:</label>
                <select id="gridSizeSelect" class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600">
                    <option value="3" selected>3x3</option>
                    <option value="4">4x4</option>
                    <option value="5">5x5</option>
                    <option value="6">6x6</option>
                    <option value="7">7x7</option>
                    <option value="8">8x8</option>
                    <option value="9">9x9</option>
                    <option value="10">10x10</option>
                </select>
            </div>

            <div class="text-center">
                <label for="puzzleModeSelect" class="block text-lg font-medium text-secondary mb-2" data-key="selectPuzzleMode">Pilih Mode Puzzle:</label>
                <select id="puzzleModeSelect" class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600">
                    <option value="sliding" data-key="slidingPuzzle">Sliding Puzzle (Default)</option>
                    <option value="jigsaw" data-key="jigsaw">Jigsaw (Tanpa Nomor)</option>
                </select>
            </div>
        </div>

        <!-- New: Number Color Picker -->
        <div class="mb-6 text-center">
            <label for="numberColorPicker" class="block text-lg font-medium text-secondary mb-2" data-key="numberColor">Warna Angka:</label>
            <input type="color" id="numberColorPicker" value="#000000"
                   class="w-24 h-10 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer">
            <p class="text-sm text-secondary mt-1" data-key="numberColorHint">Pilih warna untuk angka pada potongan puzzle.</p>
        </div>
        
        <div class="flex justify-center gap-8 mb-4 text-center">
            <div class="text-lg font-semibold text-secondary">
                <span data-key="moves">Gerakan</span>: <span id="moveCounter" class="moves-time-text">0</span>
            </div>
            <div class="text-lg font-semibold text-secondary">
                <span data-key="time">Waktu</span>: <span id="timerDisplay" class="moves-time-text">00:00</span>
            </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-6">
            <button id="shuffleButton" class="btn-primary-gradient text-white font-semibold py-3 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" data-key="shuffle">
                Acak
            </button>
            <button id="undoButton" class="btn-purple text-white font-semibold py-3 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-2" data-key="undo">
                Urungkan
            </button>
            <button id="resetButton" class="btn-gray text-white font-semibold py-3 px-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2" data-key="resetPuzzle">
                Reset Puzzle
            </button>
        </div>

        <!-- Promosi Website -->
        <div id="websitePromo" class="text-center text-lg font-bold my-6 p-4 rounded-lg promo-gradient-animation">
            <p data-key="promoText">Ayo bermain sliding puzzle di:</p>
            <a href="https://hanzercopy.cloud/" target="_blank" class="text-white hover:underline">https://hanzercopy.cloud/</a>
        </div>

        <div id="solveStatus" class="text-center text-red-600 font-medium mb-4" style="min-height: 24px;"></div>

        <!-- Progress Indicator -->
        <div id="progressIndicator">
            <div id="progressBar">
                <span id="progressText">0%</span>
            </div>
        </div>

        <div class="relative w-full max-w-full flex justify-center items-center overflow-hidden mb-6" style="min-height: 250px;">
            <canvas id="puzzleCanvas" class="w-full h-auto max-w-full canvas-border canvas-bg"></canvas>
            <canvas id="confettiCanvas"></canvas> <!-- Confetti canvas overlay -->
        </div>

        <div class="text-center mt-4 flex flex-wrap justify-center gap-4">
            <button id="viewOriginalImageButton" class="btn-gray text-white font-semibold py-2 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2" data-key="viewOriginalImage">
                Lihat Gambar Asli
            </button>
            <button id="replayButton" class="btn-primary-gradient text-white font-semibold py-2 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" style="display: none;" data-key="replayMoves">
                Putar Ulang Gerakan
            </button>
        </div>
        
        <p class="text-center text-secondary text-sm italic mt-4" data-key="clickHint">Klik potongan yang berdekatan dengan tempat kosong untuk memindahkannya.</p>

        <div class="mt-6">
            <h2 class="text-xl font-semibold text-secondary mb-2 text-center" data-key="moveHistoryTitle">Riwayat Gerakan Anda:</h2>
            <div id="moveHistoryContainer" class="p-3 rounded-lg shadow-inner">
                <ul id="moveHistoryList" class="list-disc list-inside text-secondary">
                    <!-- Move history items will be appended here -->
                </ul>
            </div>
        </div>

        <!-- Moves Per Time Graph -->
        <div id="movesPerTimeGraphContainer">
            <h2 class="text-xl font-semibold text-secondary mb-2" data-key="movesPerTimeGraphTitle">Gerakan per Interval Waktu:</h2>
            <svg id="movesPerTimeGraphSVG"></svg>
        </div>

        <!-- New: Directional Moves Graph -->
        <div id="directionalMovesGraphContainer">
            <h2 class="text-xl font-semibold text-secondary mb-2" data-key="directionalMovesGraphTitle">Distribusi Arah Gerakan:</h2>
            <svg id="directionalMovesGraphSVG"></svg>
        </div>

        <div id="playerStatsContainer" class="mt-6 p-4 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold text-secondary mb-3 text-center" data-key="playerStatsTitle">Statistik Pemain:</h2>
            
            <ul class="text-secondary">
                <li><span data-key="totalGamesPlayed">Total Game Dimainkan</span>: <span id="statTotalGames" class="font-bold text-primary">0</span></li>
                <li><span data-key="totalTimePlayed">Total Waktu Bermain</span>: <span id="statTotalTime" class="font-bold text-primary">00:00:00</span></li>
                <li><span data-key="totalPiecesMoved">Total Potongan Dipindahkan</span>: <span id="statTotalPiecesMoved" class="font-bold text-primary">0</span></li>
            </ul>

            <div class="mb-4 text-center mt-4">
                <label for="statsGridSizeFilter" class="block text-lg font-medium text-secondary mb-2" data-key="viewStatsFor">Lihat Statistik Untuk:</label>
                <select id="statsGridSizeFilter" class="px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600">
                    <option value="3" data-key="size3x3">3x3</option>
                    <option value="4" data-key="size4x4">4x4</option>
                    <option value="5" data-key="size5x5">5x5</option>
                    <option value="6">6x6</option>
                    <option value="7">7x7</option>
                    <option value="8">8x8</option>
                    <option value="9">9x9</option>
                    <option value="10">10x10</option>
                    <option value="all" data-key="allSizes">Tampilkan Semua</option>
                </select>
            </div>

            <ul class="text-secondary">
                <li class="mt-2 text-lg font-semibold text-primary stat-header" data-key="bestStats">Statistik Terbaik:</li>
                <div id="detailedStatsList">
                    <li class="ml-4 stat-item" data-grid-size="3"><span data-key="bestTime3x3">Waktu Terbaik (3x3)</span>: <span id="statBestTime3x3" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="3"><span data-key="bestMoves3x3">Gerakan Terbaik (3x3)</span>: <span id="statBestMoves3x3" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="4"><span data-key="bestTime4x4">Waktu Terbaik (4x4)</span>: <span id="statBestTime4x4" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="4"><span data-key="bestMoves4x4">Gerakan Terbaik (4x4)</span>: <span id="statBestMoves4x4" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="5"><span data-key="bestTime5x5">Waktu Terbaik (5x5)</span>: <span id="statBestTime5x5" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="5"><span data-key="bestMoves5x5">Gerakan Terbaik (5x5)</span>: <span id="statBestMoves5x5" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="6"><span data-key="bestTime6x6">Waktu Terbaik (6x6)</span>: <span id="statBestTime6x6" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="6"><span data-key="bestMoves6x6">Gerakan Terbaik (6x6)</span>: <span id="statBestMoves6x6" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="7"><span data-key="bestTime7x7">Waktu Terbaik (7x7)</span>: <span id="statBestTime7x7" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="7"><span data-key="bestMoves7x7">Gerakan Terbaik (7x7)</span>: <span id="statBestMoves7x7" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="8"><span data-key="bestTime8x8">Waktu Terbaik (8x8)</span>: <span id="statBestTime8x8" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="8"><span data-key="bestMoves8x8">Gerakan Terbaik (8x8)</span>: <span id="statBestMoves8x8" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="9"><span data-key="bestTime9x9">Waktu Terbaik (9x9)</span>: <span id="statBestTime9x9" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="9"><span data-key="bestMoves9x9">Gerakan Terbaik (9x9)</span>: <span id="statBestMoves9x9" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="10"><span data-key="bestTime10x10">Waktu Terbaik (10x10)</span>: <span id="statBestTime10x10" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="10"><span data-key="bestMoves10x10">Gerakan Terbaik (10x10)</span>: <span id="statBestMoves10x10" class="font-bold text-primary">--</span></li>
                </div>

                <li class="mt-2 text-lg font-semibold text-primary stat-header" data-key="worstStats">Statistik Terlama:</li>
                <div id="detailedStatsListWorst"> <!-- New container for worst stats -->
                    <li class="ml-4 stat-item" data-grid-size="3"><span data-key="worstTime3x3">Waktu Terlama (3x3)</span>: <span id="statWorstTime3x3" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="3"><span data-key="worstMoves3x3">Gerakan Terlama (3x3)</span>: <span id="statWorstMoves3x3" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="4"><span data-key="worstTime4x4">Waktu Terlama (4x4)</span>: <span id="statWorstTime4x4" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="4"><span data-key="worstMoves4x4">Gerakan Terlama (4x4)</span>: <span id="statWorstMoves4x4" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="5"><span data-key="worstTime5x5">Waktu Terlama (5x5)</span>: <span id="statWorstTime5x5" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="5"><span data-key="worstMoves5x5">Gerakan Terlama (5x5)</span>: <span id="statWorstMoves5x5" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="6"><span data-key="worstTime6x6">Waktu Terlama (6x6)</span>: <span id="statWorstTime6x6" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="6"><span data-key="worstMoves6x6">Gerakan Terlama (6x6)</span>: <span id="statWorstMoves6x6" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="7"><span data-key="worstTime7x7">Waktu Terlama (7x7)</span>: <span id="statWorstTime7x7" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="7"><span data-key="worstMoves7x7">Gerakan Terlama (7x7)</span>: <span id="statWorstMoves7x7" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="8"><span data-key="worstTime8x8">Waktu Terlama (8x8)</span>: <span id="statWorstTime8x8" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="8"><span data-key="worstMoves8x8">Gerakan Terlama (8x8)</span>: <span id="statWorstMoves8x8" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="9"><span data-key="worstTime9x9">Waktu Terlama (9x9)</span>: <span id="statWorstTime9x9" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="9"><span data-key="worstMoves9x9">Gerakan Terlama (9x9)</span>: <span id="statWorstMoves9x9" class="font-bold text-primary">--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="10"><span data-key="worstTime10x10">Waktu Terlama (10x10)</span>: <span id="statWorstTime10x10" class="font-bold text-primary">--:--</span></li>
                    <li class="ml-4 stat-item" data-grid-size="10"><span data-key="worstMoves10x10">Gerakan Terlama (10x10)</span>: <span id="statWorstMoves10x10" class="font-bold text-primary">--</span></li>
                </div>
            </ul>
        </div>
        
    </div>

    <div id="messageBoxContainer"></div>
    <div id="confirmationBoxContainer"></div>

    <div id="originalImageDisplayContainer" class="original-image-display-container">
        <img id="fullImageDisplay" src="" alt="Gambar Asli">
        <button id="backToPuzzleButton" class="btn-primary-gradient text-white font-semibold py-2 px-4 rounded-lg shadow-md" data-key="backToPuzzle">
            Kembali ke Puzzle
        </button>
    </div>

    <!-- Cropper Modal -->
    <div id="imageCropperContainer" class="cropper-modal" style="display: none;">
        <div class="cropper-content">
            <h2 class="text-2xl font-bold text-center text-primary mb-4" data-key="cropAreaTitle">Pilih Area Puzzle</h2>
            <canvas id="cropperCanvas"></canvas>
            <div class="cropper-controls">
                <button id="confirmCropButton" class="btn-green-solve text-white font-semibold py-2 px-4 rounded-lg shadow-md" data-key="confirmCrop">
                    Konfirmasi Potongan
                </button>
                <button id="cancelCropButton" class="btn-gray text-white font-semibold py-2 px-4 rounded-lg shadow-md" data-key="cancel">
                    Batal
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingMessage" data-key="loading">Memuat...</p>
    </div>

    <script src="script.js"></script> <!-- Menghubungkan ke file JavaScript eksternal -->
</body>
</html>

